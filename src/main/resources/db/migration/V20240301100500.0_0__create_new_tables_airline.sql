DECLARE
col_count NUMBER;
BEGIN
SELECT COUNT(*)
INTO col_count
FROM user_tab_columns
WHERE table_name = 'FLIGHT_LEG'
  AND column_name = 'AIRLINE';

IF col_count = 0 THEN
        EXECUTE IMMEDIATE 'ALTER TABLE FLIGHT_LEG ADD AIRLINE VARCHAR2(255)';
END IF;
END;
/

-- ALTER TABLE FLIGHT_LEG DROP COLUMN AIRLINE;


DECLARE
col_count NUMBER;
BEGIN
SELECT COUNT(*)
INTO col_count
FROM user_tab_columns
WHERE table_name = 'FLIGHT_LEG'
  AND column_name = 'MANAGED_BY';

IF col_count = 0 THEN
        EXECUTE IMMEDIATE 'ALTER TABLE FLIGHT_LEG ADD MANAGED_BY VARCHAR2(255)';
END IF;
END;
/
-- ALTER TABLE FLIGHT_LEG DROP COLUMN MANAGED_BY;

DECLARE
col_count NUMBER;
BEGIN
SELECT COUNT(*)
INTO col_count
FROM user_tab_columns
WHERE table_name = 'FLIGHT_LEG'
  AND column_name = 'AIRLINE_ID';

IF col_count > 0 THEN
        EXECUTE IMMEDIATE 'ALTER TABLE FLIGHT_LEG DROP COLUMN AIRLINE_ID';
END IF;
END;
/

DECLARE
table_count NUMBER;
BEGIN
SELECT COUNT(*)
INTO table_count
FROM user_tables
WHERE table_name = 'AIRLINE';

IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE AIRLINE';
END IF;
END;
/

DECLARE
seq_count NUMBER;
BEGIN
SELECT COUNT(*)
INTO seq_count
FROM user_sequences
WHERE sequence_name = 'AIRLINE_SEQ';

IF seq_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP SEQUENCE AIRLINE_SEQ';
END IF;
END;
/

DECLARE
table_count NUMBER;
BEGIN
SELECT COUNT(*)
INTO table_count
FROM user_tables
WHERE table_name = 'AIRLINE_MANAGED_BY';

IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE AIRLINE_MANAGED_BY';
END IF;
END;
/

DECLARE
seq_count NUMBER;
BEGIN
SELECT COUNT(*)
INTO seq_count
FROM user_sequences
WHERE sequence_name = 'AIRLINE_MANAGED_BY_SEQ';

IF seq_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP SEQUENCE AIRLINE_MANAGED_BY_SEQ';
END IF;
END;
/

DECLARE
table_count NUMBER;
BEGIN
SELECT COUNT(*)
INTO table_count
FROM user_tables
WHERE table_name = 'AIRLINE_OPERATED_BY';

IF table_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP TABLE AIRLINE_OPERATED_BY';
END IF;
END;
/

DECLARE
seq_count NUMBER;
BEGIN
SELECT COUNT(*)
INTO seq_count
FROM user_sequences
WHERE sequence_name = 'AIRLINE_OPERATED_BY_SEQ';

IF seq_count > 0 THEN
        EXECUTE IMMEDIATE 'DROP SEQUENCE AIRLINE_OPERATED_BY_SEQ';
END IF;
END;
/

-- ALTER TABLE FLIGHT_LEG DROP COLUMN AIRLINE;
-- ALTER TABLE FLIGHT_LEG DROP COLUMN MANAGED_BY;
--
-- ALTER TABLE FLIGHT_LEG ADD COLUMN AIRLINE_MANGED_BY_IATA INT NOT NULL;
-- ALTER TABLE FLIGHT_LEG ADD COLUMN AIRLINE_MANGED_BY_DESCRIPTION INT NOT NULL;
-- ALTER TABLE FLIGHT_LEG ADD COLUMN AIRLINE_OPERATED_BY_IATA INT NOT NULL;
-- ALTER TABLE FLIGHT_LEG ADD COLUMN AIRLINE_OPERATED_BY_DESCRIPTION INT NOT NULL;
